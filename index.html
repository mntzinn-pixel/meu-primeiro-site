<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Minha Loja Gamer</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;}

body{
  font-family:'Poppins',sans-serif;
  background:#050816;
  color:white;
  overflow-x:hidden;
}

/* PART√çCULAS */
canvas{
  position:fixed;
  top:0;
  left:0;
  z-index:-1;
}

/* HEADER */
.header{
  padding:12px;
  text-align:center;
  backdrop-filter:blur(10px);
}

.logo{
  font-family:'Orbitron',sans-serif;
  font-size:18px;
  background:linear-gradient(90deg,#00ffff,#7c3aed,#00ffff);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

/* GRID */
.grid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:10px;
  padding:12px;
}

.categoria-titulo{
  grid-column:1/-1;
  padding:6px;
  font-family:'Orbitron';
  font-size:12px;
  text-align:center;
  border-radius:8px;
  background:rgba(0,255,255,0.05);
  margin:15px 0 5px;
}

.card{
  background:rgba(255,255,255,0.05);
  border-radius:12px;
  backdrop-filter:blur(15px);
  border:1px solid rgba(0,255,255,0.25);
  overflow:hidden;
  transition:0.3s;
}

.card:hover{
  box-shadow:0 0 12px #00ffff,0 0 25px #7c3aed;
  transform:scale(1.03);
}

.card img{
  width:100%;
  height:95px;
  object-fit:cover;
}

.card-content{
  padding:6px;
  font-size:13px;
}

.preco{
  color:#00ffff;
  font-weight:700;
}

.quantidade-box{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:6px;
  margin-top:5px;
}

.quantidade-box button{
  width:24px;
  height:24px;
  border:none;
  border-radius:6px;
  background:linear-gradient(45deg,#00ffff,#7c3aed);
  color:white;
  font-weight:bold;
  cursor:pointer;
}

.cart-float{
  position:fixed;
  bottom:18px;
  right:18px;
  background:linear-gradient(45deg,#00ffff,#7c3aed);
  width:55px;
  height:55px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:22px;
  cursor:pointer;
  box-shadow:0 0 20px #00ffff;
}

.cart-count{
  position:absolute;
  top:-4px;
  right:-4px;
  background:red;
  width:18px;
  height:18px;
  font-size:11px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* MODAL */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.7);
  display:none;
  justify-content:center;
  align-items:center;
}

.modal-content{
  background:#0a0f1f;
  width:90%;
  max-width:400px;
  border-radius:12px;
  padding:15px;
  border:1px solid #00ffff;
  animation:fadeIn 0.3s ease;
}

@keyframes fadeIn{
  from{transform:scale(0.8);opacity:0;}
  to{transform:scale(1);opacity:1;}
}

.modal h2{
  text-align:center;
  margin-bottom:10px;
}

.close{
  text-align:right;
  cursor:pointer;
  color:red;
  font-weight:bold;
}

.total{
  margin-top:10px;
  font-weight:bold;
  color:#00ffff;
}
</style>
</head>

<body>

<canvas id="particles"></canvas>

<div class="header">
  <div class="logo">MINHA LOJA GAMER</div>
</div>

<div class="grid" id="produtos"></div>

<div class="cart-float" onclick="abrirModal()">
üõí
<div class="cart-count" id="cart-count">0</div>
</div>

<div class="modal" id="modal">
  <div class="modal-content">
    <div class="close" onclick="fecharModal()">X</div>
    <h2>Seu Carrinho</h2>
    <div id="lista-carrinho"></div>
    <div class="total" id="total"></div>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyDAnBNdufwLlMW4bZHK0mUgncmIezNSMTg",
  authDomain: "minha-loja-digital1.firebaseapp.com",
  projectId: "minha-loja-digital1",
  storageBucket: "minha-loja-digital1.firebasestorage.app",
  messagingSenderId: "119834670597",
  appId: "1:119834670597:web:36edb828d7fdded6678e6c"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

let carrinho = {};
let totalItens = 0;

function atualizarCarrinho(){
  document.getElementById("cart-count").innerText = totalItens;

  let lista = "";
  let total = 0;

  for(let nome in carrinho){
    let item = carrinho[nome];
    lista += `<div>${nome} x${item.qtd} - R$ ${item.preco * item.qtd}</div>`;
    total += item.preco * item.qtd;
  }

  document.getElementById("lista-carrinho").innerHTML = lista;
  document.getElementById("total").innerText = "Total: R$ " + total;
}

window.abrirModal = function(){
  document.getElementById("modal").style.display="flex";
}

window.fecharModal = function(){
  document.getElementById("modal").style.display="none";
}

async function carregarProdutos(){
  const querySnapshot = await getDocs(collection(db,"produtos"));
  const grid = document.getElementById("produtos");

  querySnapshot.forEach(doc=>{
    const p = doc.data();
    grid.innerHTML += `
    <div class="card">
      <img src="${p.imagem}">
      <div class="card-content">
        <div>${p.nome}</div>
        <div class="preco">R$ ${p.preco}</div>
        <div class="quantidade-box">
          <button onclick="alterarQtd('${p.nome}',${p.preco},-1)">-</button>
          <span id="qtd-${p.nome}">0</span>
          <button onclick="alterarQtd('${p.nome}',${p.preco},1)">+</button>
        </div>
      </div>
    </div>`;
  });
}

window.alterarQtd = function(nome,preco,valor){
  const span = document.getElementById("qtd-"+nome);
  let qtd = parseInt(span.innerText);
  qtd += valor;
  if(qtd<0) qtd=0;
  span.innerText=qtd;

  if(!carrinho[nome]) carrinho[nome]={qtd:0,preco:preco};
  carrinho[nome].qtd=qtd;
  if(qtd==0) delete carrinho[nome];

  totalItens = Object.values(carrinho).reduce((a,b)=>a+b.qtd,0);
  atualizarCarrinho();
}

carregarProdutos();
</script>

<script>
/* PART√çCULAS */
const canvas=document.getElementById("particles");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

let particles=[];
for(let i=0;i<60;i++){
  particles.push({
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height,
    radius:Math.random()*2,
    dx:(Math.random()-0.5)*0.5,
    dy:(Math.random()-0.5)*0.5
  });
}

function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  particles.forEach(p=>{
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.radius,0,Math.PI*2);
    ctx.fillStyle="#00ffff";
    ctx.fill();
    p.x+=p.dx;
    p.y+=p.dy;
  });
  requestAnimationFrame(animate);
}
animate();
</script>

</body>
</html>
